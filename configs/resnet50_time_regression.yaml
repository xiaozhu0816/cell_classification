experiment_name: resnet50_time_regression
seed: 42

data:
  infected_dir: "/isilon/datalake/gurcan_rsch/scratch/WSI/zhengjie/DATA/GMU_cell_1023/HBMVEC/Infected_well/no_labels"
  uninfected_dir: "/isilon/datalake/gurcan_rsch/scratch/WSI/zhengjie/DATA/GMU_cell_1023/HBMVEC/Uninfected_well/no_labels"
  infected_label: 1
  uninfected_label: 0
  split_ratios: [0.7, 0.1, 0.2]
  split_seed: 123
  batch_size: 128
  num_workers: 4
  drop_last: false
  balance_sampler: false
  transforms:
    image_size: 512
    random_flip: true
    random_rotation: true
    color_jitter: false
    mean: [0.5, 0.5, 0.5]
    std: [0.25, 0.25, 0.25]
  frames:
    frames_per_hour: 2.0
    infected_window_hours: [0, 30]
    infected_stride: 1
    uninfected_stride: 1
    uninfected_use_all: true

task:
  type: regression
  regression:
    target: time_since_onset   # options: time_since_onset, time_to_onset
    infection_onset_hour: 2.0  # T2 is first infected frame for B2
    uninfected_target: 0.0
    clamp_range: [0.0, 48.0]

model:
  name: resnet50
  pretrained: true
  num_classes: 1
  dropout: 0.3
  train_backbone: true

optimizer:
  lr: 0.0001
  weight_decay: 0.0001

scheduler:
  t_max: 20
  eta_min: 0.000001

training:
  epochs: 8
  amp: true
  grad_clip: 1.0
  checkpoint_dir: checkpoints
  k_folds: 5

logging:
  output_dir: outputs

analysis:
  thresholds: []
  time_bins:
    - [0, 12]
    - [12, 24]
    - [24, 36]
    - [36, 48]
